<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
<title>Åifa GÃ¼nlÃ¼ÄŸÃ¼</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="Åifa GÃ¼nlÃ¼ÄŸÃ¼">

<style>
/* --- ÅÄ°FA GÃœNLÃœÄÃœ: SICAK, ORGANÄ°K VE YATIÅTIRICI RENKLER --- */
:root {
  --bg: #FDFBF7; /* SÄ±cak krem / Sayfa rengi */
  --card: #FFFFFF; 
  --text-main: #4A403A; /* GÃ¶z yormayan acÄ± kahve / Mocha */
  --text-muted: #8C827A; /* YumuÅŸak boz / Kum rengi */
  --line: rgba(74, 64, 58, 0.08);
  
  --accent-green: #6B9071; /* AdaÃ§ayÄ± YeÅŸili (Åifa ve huzur) */
  --accent-blue: #6482AD; /* GÃ¶k mavisi */
  --accent-orange: #D98359; /* YumuÅŸak kiremit / Toprak */
  --accent-purple: #9E7BB5; /* Lavanta */
  
  /* Biten Ä°laÃ§lar Ä°Ã§in Ferah Zemin */
  --done-bg: #F2F7F4;
  --done-border: #C8E0CD;
  --done-text: #4E7355;

  --shadow-soft: 0 8px 24px rgba(74, 64, 58, 0.06);
}

/* Gece Modu: GÃ¶zleri tamamen dinlendiren Kahve/Antrasit tonlarÄ± */
@media (prefers-color-scheme: dark) {
  :root { 
    --bg: #1A1614; /* Derin sÄ±cak antrasit */
    --card: #241F1C; 
    --text-main: #EAE6DF; /* KÄ±rÄ±k beyaz / Krem */
    --text-muted: #A39B94; 
    --line: rgba(234, 230, 223, 0.08);
    
    --accent-green: #7BA882; 
    --accent-blue: #7BA0D4; 
    --accent-orange: #E89E76; 
    --accent-purple: #B692CF; 
    
    --done-bg: rgba(107, 144, 113, 0.15);
    --done-border: rgba(107, 144, 113, 0.3);
    --done-text: #A0C7A6;

    --shadow-soft: 0 8px 24px rgba(0, 0, 0, 0.4);
  }
}

* { box-sizing: border-box; }
body { margin: 0; background: var(--bg); color: var(--text-main); font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, sans-serif; padding: 20px 16px 100px 16px; -webkit-font-smoothing: antialiased; transition: background 0.4s, color 0.4s; }

/* 1. ZARÄ°F KARÅILAMA (KPI, Grafik vs. Yok. Sadece sevgi var) */
.header { margin-bottom: 24px; padding-top: 10px; }
.greeting-title { font-size: 28px; font-weight: 800; letter-spacing: -0.5px; margin: 0 0 4px 0; color: var(--text-main); }
.date-subtitle { font-size: 15px; font-weight: 600; color: var(--text-muted); display: flex; align-items: center; gap: 8px; }
.sync-dot { width: 8px; height: 8px; background-color: var(--accent-green); border-radius: 50%; display: inline-block; animation: pulse 2s infinite; }
@keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }

/* 2. GÃœNLÃœK ÅÄ°FA NOTU (Hava durumu ve teÅŸhisin aÃ§Ä±k mektup hali) */
.daily-note-card { background: var(--card); border-radius: 24px; padding: 20px; box-shadow: var(--shadow-soft); border: 1px solid var(--line); margin-bottom: 24px; position: relative; overflow: hidden; }
/* YumuÅŸak bir kÃ¶ÅŸe deseni */
.daily-note-card::before { content: ''; position: absolute; top: 0; right: 0; width: 80px; height: 80px; background: radial-gradient(circle top right, rgba(217, 131, 89, 0.1), transparent); border-radius: 0 24px 0 100px; pointer-events: none; }

.note-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; }
.note-title { font-size: 14px; font-weight: 800; color: var(--accent-orange); text-transform: uppercase; letter-spacing: 1px; }
.note-weather { font-size: 16px; font-weight: 800; color: var(--text-main); display: flex; align-items: center; gap: 6px; }

.note-body { font-size: 16px; font-weight: 500; line-height: 1.6; color: var(--text-main); }

/* Ã–ZEL GÃœN ALARMLARI (Ä°ÄŸne, Kortizon vs. ÅÄ±k Kalkanlar) */
#alertsArea { display: flex; flex-direction: column; gap: 10px; margin-bottom: 24px; }
.alert-box { display: none; padding: 16px 20px; border-radius: 20px; font-size: 15px; font-weight: 700; color: white; box-shadow: 0 4px 15px rgba(0,0,0,0.1); display: flex; align-items: center; gap: 12px; line-height: 1.4; }
.alert-blue { background: var(--accent-blue); }
.alert-purple { background: var(--accent-purple); }
.alert-red { background: var(--accent-orange); } /* KÄ±pkÄ±rmÄ±zÄ± yerine gÃ¶z yormayan kiremit */
.alert-yellow { background: #D4A373; }

/* 3. ZAMAN Ã‡Ä°ZELGESÄ° (Tek SÃ¼tun, YukarÄ±dan AÅŸaÄŸÄ±ya Kitap Gibi) */
.timeline-container { display: flex; flex-direction: column; gap: 16px; }

.time-block { background: var(--card); border-radius: 24px; padding: 20px; box-shadow: var(--shadow-soft); border: 1px solid var(--line); transition: all 0.3s ease; }

/* VAKÄ°T BAÅLIÄI */
.time-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 2px solid var(--line); }
.time-title { font-size: 18px; font-weight: 800; color: var(--text-main); display: flex; align-items: center; gap: 8px; }
.time-badge { font-size: 13px; font-weight: 800; color: var(--text-muted); background: var(--bg); padding: 4px 10px; border-radius: 12px; }

/* Ä°LAÃ‡ LÄ°STESÄ° (Ã‡ok bÃ¼yÃ¼k ve ferah) */
.med-list { display: flex; flex-direction: column; gap: 16px; }
.med-item { display: flex; align-items: flex-start; gap: 14px; }

.med-icon { width: 28px; height: 28px; border-radius: 50%; border: 2px solid var(--line); display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px; }
.med-icon.checked { background-color: var(--accent-green); border-color: var(--accent-green); color: white; }
.med-icon svg { width: 14px; height: 14px; fill: none; stroke: currentColor; stroke-width: 3; stroke-linecap: round; stroke-linejoin: round; }

.med-text-group { display: flex; flex-direction: column; gap: 4px; }
.med-name { font-size: 17px; font-weight: 800; color: var(--text-main); line-height: 1.3; }
.med-desc { font-size: 14px; font-weight: 600; color: var(--text-muted); font-style: italic; }

/* BÄ°TEN Ä°LAÃ‡LAR (Kompakt ve Huzurlu GÃ¶rÃ¼nÃ¼m - GÃ¶zÃ¼ Yormaz) */
.time-block.completed { background: var(--done-bg); border-color: var(--done-border); padding: 16px 20px; box-shadow: none; display: flex; flex-direction: row; align-items: center; justify-content: space-between; cursor: pointer; }
.time-block.completed .time-header { border: none; margin: 0; padding: 0; }
.time-block.completed .med-list { display: none; }
.time-block.completed .time-title { color: var(--done-text); font-size: 16px; }
.time-block.completed .time-badge { background: transparent; color: var(--done-text); font-weight: 800; font-size: 14px; }

/* MÄ°NÄ°K BUTONU (Sevgi Dolu) */
.minik-btn { position: fixed; bottom: 24px; right: 24px; background: var(--card); width: 68px; height: 68px; border-radius: 34px; display: flex; align-items: center; justify-content: center; font-size: 34px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: 2px solid var(--line); z-index: 1000; cursor: pointer; transition: transform 0.2s; }
.minik-btn:active { transform: scale(0.9); }
.minik-bubble { position: fixed; bottom: 105px; right: 24px; background: var(--accent-orange); color: #fff; padding: 20px; border-radius: 24px 24px 0 24px; font-size: 16px; font-weight: 600; display: none; z-index: 1001; width: 300px; box-shadow: 0 12px 35px rgba(217, 131, 89, 0.4); line-height: 1.5; text-align: left; }
</style>
</head>
<body onclick="document.getElementById('minikBubble').style.display = 'none'">

<div class="header">
    <div class="greeting-title" id="greetingText">GÃ¼naydÄ±n, Nurten Sultan</div>
    <div class="date-subtitle">
        <span class="sync-dot"></span>
        <span id="clockText">BaÄŸlanÄ±yor...</span>
    </div>
</div>

<div id="alertsArea"></div>

<div class="daily-note-card">
    <div class="note-header">
        <div class="note-title">GÃ¼nÃ¼n Notu</div>
        <div class="note-weather" id="wBasicText">--Â°C</div>
    </div>
    <div class="note-body" id="wAdviceText">
        SaÄŸlÄ±k asistanÄ±n verileri inceliyor, birazdan sana bugÃ¼nÃ¼n tavsiyesini hazÄ±rlayacak...
    </div>
</div>

<div class="timeline-container" id="timelineArea">
    </div>

<div class="minik-btn" onclick="event.stopPropagation(); mewMsg()">ğŸˆ</div>
<div class="minik-bubble" id="minikBubble">Miyav! â¤ï¸</div>

<script>
// API URL BURAYA
const API_URL = "https://script.google.com/macros/s/AKfycbybibVR75b918CBOMRlpEJu699hHSvOvCFXD6qRAL-JUxmK95HIUcF5onhEQjrIbF67Wg/exec"; 
let sonBasariZamani = 0;
let fetchDevamEdiyor = false;
let apiData = {};

const svgCheck = `<svg viewBox="0 0 14 10"><polyline points="1.5 5 5 8.5 12.5 1"></polyline></svg>`;
const svgCheckCircle = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:20px; height:20px;"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>`;

// ZAMAN VE SELAMLAMA YÃ–NETÄ°MÄ°
function saniyeTiktak() {
    const dNow = new Date();
    const hour = dNow.getHours();
    
    // Annemiz iÃ§in hitap
    let gMsg = "Ä°yi Geceler";
    if(hour >= 5 && hour < 12) gMsg = "GÃ¼naydÄ±n";
    else if(hour >= 12 && hour < 17) gMsg = "TÃ¼naydÄ±n";
    else if(hour >= 17 && hour < 22) gMsg = "Ä°yi AkÅŸamlar";
    
    document.getElementById('greetingText').innerText = `${gMsg}, Nurten Sultan`;

    // Saat ve CanlÄ±lÄ±k
    const clockEl = document.getElementById('clockText');
    const dateStr = dNow.getDate() + " " + dNow.toLocaleDateString('tr-TR', {month:'long'}) + " " + dNow.toLocaleDateString('tr-TR', {weekday:'long'});
    const timeStr = String(dNow.getHours()).padStart(2,'0') + ':' + String(dNow.getMinutes()).padStart(2,'0');
    
    const farkSaniye = sonBasariZamani > 0 ? Math.floor((Date.now() - sonBasariZamani) / 1000) : 999;
    
    if (sonBasariZamani === 0) {
        clockEl.innerText = `${dateStr} â€¢ BaÄŸlanÄ±yor...`;
    } else if (farkSaniye < 60) {
        clockEl.innerText = `${dateStr} â€¢ ${timeStr} (CanlÄ±)`;
    } else {
        clockEl.innerText = `${dateStr} â€¢ ${timeStr} (BaÄŸlantÄ± Bekleniyor)`;
    }
}

// ÅÄ°FA NOTU (HAVA & TEÅHÄ°S)
async function fetchWeather() {
    try {
        const res = await fetch('https://api.open-meteo.com/v1/forecast?latitude=41.07&longitude=28.64&current=temperature_2m,relative_humidity_2m');
        const data = await res.json();
        const t = data.current.temperature_2m, h = data.current.relative_humidity_2m;
        
        let icon = "ğŸŒ¥ï¸";
        let adv = `Hava bugÃ¼n senin iÃ§in gayet gÃ¼zel (${t}Â°C). Romatizma ve SjÃ¶gren aÃ§Ä±sÄ±ndan en konforlu ve rahat hissedeceÄŸin denge durumundasÄ±n. GÃ¼nÃ¼n tadÄ±nÄ± Ã§Ä±kar!`;
        
        if (h > 70 && t < 15) { 
            icon = "ğŸŒ§ï¸"; 
            adv = `DÄ±ÅŸarÄ±da soÄŸuk ve nemli bir hava var (%${h} Nem). Nem ve soÄŸuk birleÅŸtiÄŸinde eklem sÄ±vÄ±larÄ±nÄ±n basÄ±ncÄ± deÄŸiÅŸir; bu da romatizmal aÄŸrÄ±larÄ±nÄ± tetikleyebilir. LÃ¼tfen dizlerini sÄ±cak tutmaya ve bugÃ¼n kendini hiÃ§ yormamaya Ã¶zen gÃ¶ster.`; 
        }
        else if (t < 12) { 
            icon = "ğŸ¥¶"; 
            adv = `DÄ±ÅŸarÄ±sÄ± oldukÃ§a soÄŸuk (${t}Â°C). SoÄŸuk hava eklemleri sertleÅŸtirdiÄŸi ve SjÃ¶gren kaynaklÄ± gÃ¶z kuruluÄŸunu artÄ±rdÄ±ÄŸÄ± iÃ§in eklemlerini mutlaka sÄ±cak tutmalÄ±, rÃ¼zgara Ã§Ä±karsan damlalarÄ±nÄ± sÄ±klaÅŸtÄ±rmalÄ±sÄ±n.`; 
        }
        else if (h > 75) { 
            icon = "ğŸŒ«ï¸"; 
            adv = `DÄ±ÅŸarÄ±da nem oranÄ± Ã§ok yÃ¼ksek (%${h}). YÃ¼ksek nem eklemlerde aÄŸÄ±rlÄ±k hissi ve sabah tutukluÄŸunu artÄ±rabileceÄŸi iÃ§in bugÃ¼n fiziksel olarak kendini fazla zorlamamaya dikkat etmelisin.`; 
        }
        else if (t > 28) { 
            icon = "â˜€ï¸"; 
            adv = `Hava oldukÃ§a sÄ±cak (${t}Â°C). YÃ¼ksek Ä±sÄ± vÃ¼cuttaki sÄ±vÄ± kaybÄ±nÄ± hÄ±zlandÄ±rÄ±p aÄŸÄ±z ve gÃ¶z kuruluÄŸunu artÄ±rÄ±r. Bu yÃ¼zden bol bol su iÃ§meyi ve gÃ¶z damlalarÄ±nÄ± her zamankinden sÄ±k kullanmayÄ± lÃ¼tfen unutma.`; 
        }
        
        document.getElementById('wBasicText').innerText = `${icon} ${t}Â°C`;
        document.getElementById('wAdviceText').innerText = adv;
    } catch(e) { }
}

// MÄ°NÄ°K'Ä°N AKILLI CÃœMLE MOTORU (100.000 Ä°htimal, Tek Paragraf)
function mewMsg() {
    const arrA = ["Nenesinin kuzusu,", "GÃ¼zeller gÃ¼zeli annem,", "Benim canÄ±m nenem,", "Nurten SultanÄ±m,", "Pamuk nenem,", "CanÄ±mÄ±n iÃ§i,", "En sevdiÄŸim insan,", "TatlÄ± annem,", "KraliÃ§em,", "SarÄ± papatyam,"];
    const arrB = ["ben Virbac mamamÄ± lÄ±kÄ±r lÄ±kÄ±r yedim", "az Ã¶nce GÃ¶ker'le gÃ¼zelce oyun oynadÄ±k", "Alper abim baÅŸÄ±mÄ± ÅŸefkatle okÅŸadÄ±", "Keppra'mÄ± hiÃ§ itiraz etmeden uslu uslu iÃ§tim", "kalbimin ilacÄ±nÄ± uslu uslu aldÄ±m", "camdan kuÅŸlarÄ± seyrederken seni dÃ¼ÅŸÃ¼ndÃ¼m", "patilerimi temizleyip yanÄ±na gelmeye hazÄ±rlanÄ±yorum", "astÄ±mÄ±m bugÃ¼n Ã§ok iyi, nefesim pÄ±rÄ±l pÄ±rÄ±l", "yumuÅŸacÄ±k yataÄŸÄ±mda gerinirken aklÄ±ma sen geldin", "burnumu nemlendirip bÄ±yÄ±klarÄ±mÄ± dÃ¼zelttim"];
    const arrC = ["ve ÅŸimdi gÃ¶zÃ¼m senin ilaÃ§larÄ±nda", "ve sÄ±ra senin kendi ÅŸifanÄ± almanda", "ve sen de suyunu lÄ±kÄ±r lÄ±kÄ±r iÃ§melisin", "ve ilaÃ§larÄ±nÄ± eksiksiz iÃ§tiÄŸini biliyorum", "ve biz ailecek birbirimize Ã§ok iyi bakÄ±yoruz", "ve senin de damlalarÄ±nÄ± aksatmadÄ±ÄŸÄ±nÄ± gÃ¶rmek istiyorum", "ve eklemlerin aÄŸrÄ±masÄ±n diye o sÄ±cak dizlerine kÄ±vrÄ±lacaÄŸÄ±m", "ve romatizman yormasÄ±n diye bugÃ¼n kendini hiÃ§ yormamanÄ± istiyorum", "ve SjÃ¶gren kurutmasÄ±n diye bol su iÃ§meni bekliyorum", "ve birlikte her gÃ¼n daha da iyi oluyoruz"];
    const arrD = ["seni minik kalbimle Ã§ok seviyorum! â¤ï¸", "Ä±slak burnumla yanaklarÄ±ndan Ã¶pÃ¼yorum! ğŸ¾", "bÄ±yÄ±klarÄ±m senin iÃ§in neÅŸeyle titriyor! ğŸ˜»", "ben hep senin gÃ¶lgendeyim! âœ¨", "akÅŸama yanÄ±na gelip o gÃ¼zel ellerini yalayacaÄŸÄ±m! ğŸˆ", "mÄ±rÄ±l mÄ±rÄ±l mÄ±rÄ±ldanarak sana kocaman ÅŸifa gÃ¶nderiyorum! ğŸ¶", "senin o gÃ¼zel yÃ¼zÃ¼n hiÃ§ asÄ±lmasÄ±n! ğŸŒ¼", "patilerimle boynuna kocaman sarÄ±lÄ±yorum! ğŸ¾", "bugÃ¼n de dÃ¼nyanÄ±n en ÅŸanslÄ± kedisiyim Ã§Ã¼nkÃ¼ sen varsÄ±n! ğŸ¥°", "kalbimin atÄ±ÅŸÄ± hep senin iÃ§in! â¤ï¸"];

    const pick = arr => arr[Math.floor(Math.random() * arr.length)];
    const msg = `${pick(arrA)} ${pick(arrB)} ${pick(arrC)}, ${pick(arrD)}`;

    const t = document.getElementById('minikBubble');
    t.innerHTML = msg;
    t.style.display = 'block';
}

// PROGRAM HESAPLAYICI (DeÄŸiÅŸmedi)
function getDailyProgram(dateObj) {
    let day = dateObj.getDay(); let mid = new Date(dateObj.getFullYear(), dateObj.getMonth(), dateObj.getDate());
    let p = [
      { id: 'sabah-ac', title: 'SABAH AÃ‡', time: '06:00', icon: 'ğŸŒ…', meds: [{ key: 'SABAH_AC_INH', name: 'INH', purpose: 'TÃ¼berkÃ¼loz KorumasÄ±' }] },
      { id: 'sabah-tok', title: 'SABAH TOK', time: '10:00', icon: 'ğŸ³', meds: [{ key: 'SABAH_TOK_BALIK', name: 'BalÄ±k YaÄŸÄ±', purpose: 'Genel Destek' }, { key: 'SABAH_TOK_GOZ', name: 'GÃ¶z DamlasÄ±', purpose: 'SjÃ¶gren Sendromu' }] },
      { id: 'ogle', title: 'Ã–ÄLE', time: '13:00', icon: 'â˜€ï¸', meds: [{ key: 'OGLE_BENEXOL', name: 'Benexol', purpose: 'B12 Vitamini' }] },
      { id: 'aksam', title: 'AKÅAM', time: '18:00', icon: 'ğŸŒ™', meds: [{ key: 'AKSAM_PLAQUENIL', name: 'Plaquenil', purpose: 'Romatizma & SjÃ¶gren' }] },
      { id: 'gece', title: 'GECE', time: '21:00', icon: 'ğŸ›Œ', meds: [{ key: 'GECE_QUANTAVIR', name: 'Quantavir', purpose: 'Hepatit KorumasÄ±' }, { key: 'GECE_GOZ', name: 'GÃ¶z DamlasÄ±', purpose: 'SjÃ¶gren Sendromu' }] }
    ];
    
    const dS = new Date(2026, 1, 16); 
    if(Math.round((mid - dS)/(1000*60*60*24)) % 2 === 0) p[1].meds.push({ key: 'SABAH_TOK_DELTA', name: 'Deltacortril', purpose: 'Ä°ltihap BaskÄ±layÄ±cÄ± (Kortizon)' });
    if(day === 2) { p[1].meds.push({ key: 'SABAH_TOK_COLEDAN', name: 'Coledan-D3', purpose: 'D Vitamini' }); p[4].meds.push({ key: 'GECE_FOLBIOL', name: 'Folbiol', purpose: 'Folik Asit' }); }
    if(day === 1) p[4].meds.push({ key: 'GECE_METOARTCON', name: 'Metoartcon', purpose: 'Romatizma Ä°ÄŸnesi' });
    const cS = new Date(2026, 1, 12);
    if(Math.round((mid - cS)/(1000*60*60*24)) % 14 === 0) p[4].meds.push({ key: 'GECE_CIMZIA', name: 'Cimzia Ä°ÄŸnesi', purpose: 'Biyolojik Tedavi' });
    return p;
}

// VERÄ° Ã‡EKME VE EKRAN Ã‡Ä°ZÄ°MÄ°
async function veriCek() {
    if (fetchDevamEdiyor) return;
    fetchDevamEdiyor = true;
    
    const todayStr = String(new Date().getDate()).padStart(2, '0') + '.' + String(new Date().getMonth() + 1).padStart(2, '0') + '.' + new Date().getFullYear();
    try {
        const res = await fetch(`${API_URL}?tarih=${todayStr}`);
        if (!res.ok) throw new Error("AÄŸ HatasÄ±");
        apiData = await res.json();
        sonBasariZamani = Date.now();
        ekraniCiz();
    } catch(e) { console.error(e); } finally { fetchDevamEdiyor = false; }
}

function ekraniCiz() {
    const todayProg = getDailyProgram(new Date());
    
    // UYARILAR
    let alertsHTML = "";
    todayProg.forEach(s => {
        s.meds.forEach(m => {
            if(m.key === 'SABAH_TOK_DELTA') alertsHTML += `<div class="alert-box alert-red">ğŸš¨ BugÃ¼n Deltacortril (Kortizon) GÃ¼nÃ¼</div>`;
            if(m.key === 'SABAH_TOK_COLEDAN') if(!alertsHTML.includes('Vitamin')) alertsHTML += `<div class="alert-box alert-yellow">â˜€ï¸ BugÃ¼n Vitamin ve Folbiol GÃ¼nÃ¼</div>`;
            if(m.key === 'GECE_METOARTCON') alertsHTML += `<div class="alert-box alert-blue">ğŸ§¬ BugÃ¼n Metoartcon Ä°ÄŸne GÃ¼nÃ¼</div>`;
            if(m.key === 'GECE_CIMZIA') alertsHTML += `<div class="alert-box alert-purple">ğŸ’‰ BugÃ¼n Cimzia Ä°ÄŸne GÃ¼nÃ¼! Åifa olsun.</div>`;
        });
    });
    document.getElementById('alertsArea').innerHTML = alertsHTML;

    // TEK SÃœTUN ZAMAN Ã‡Ä°ZELGESÄ° OLUÅTURMA
    let timelineHTML = "";

    todayProg.forEach((s) => {
        let isAllDone = true;
        let medsHTML = "";
        
        s.meds.forEach(m => { 
            const isDone = apiData[m.key] === "Ä°Ã§ildi";
            if(!isDone) isAllDone = false;
            
            const iconHTML = isDone ? `<div class="med-icon checked">${svgCheck}</div>` : `<div class="med-icon"></div>`;
            
            medsHTML += `
                <div class="med-item">
                    ${iconHTML}
                    <div class="med-text-group">
                        <span class="med-name">${m.name}</span>
                        <span class="med-desc">${m.purpose}</span>
                    </div>
                </div>`; 
        });
        
        // EÄER O VAKÄ°T TAMAMLANDIYSA KART KÃœÃ‡ÃœLÃœP YEÅÄ°L BÄ°R BANT HALÄ°NE GELÄ°R!
        if(isAllDone) {
            timelineHTML += `
            <div class="time-block completed" onclick="this.classList.toggle('completed')">
                <div class="time-title">${svgCheckCircle} ${s.title} Ä°laÃ§larÄ± AlÄ±ndÄ±</div>
                <div class="time-badge">Geri Al â–¼</div>
                <div class="med-list" style="margin-top:20px; width:100%;">${medsHTML}</div>
            </div>`;
        } else {
            // EÄER TAMAMLANMADIYSA KART BÃœYÃœK VE AÃ‡IK HALDE DURUR
            timelineHTML += `
            <div class="time-block">
                <div class="time-header">
                    <div class="time-title">${s.icon} ${s.title}</div>
                    <div class="time-badge">BEKLÄ°YOR</div>
                </div>
                <div class="med-list">
                    ${medsHTML}
                </div>
            </div>`;
        }
    });
    
    document.getElementById('timelineArea').innerHTML = timelineHTML;
}

// BAÅLATMA
fetchWeather();
veriCek();
setInterval(veriCek, 10000); 
setInterval(saniyeTiktak, 1000); 
document.addEventListener("visibilitychange", () => { if (document.visibilityState === 'visible') veriCek(); });
</script>
</body>
</html>
